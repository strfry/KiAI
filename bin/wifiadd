#!/bin/sh

# BSD TTY style dialog

echo \#todo Check for root: $(whoami)

echo \#todo A BSD-Style TTY Dialog
echo 
echo Please Enter SSID:
read SSID

set -x

WPA_CONF=/etc/wpa_supplicant/wpa_supplicant.conf

grep $SSID $WPA_CONF

echo Do you want to overwrite this SSID [y,N]

set +x

echo "Enter Passphrase"
CONFIG=$(wpa_passphrase "$SSID")


echo "Generated Config:"
echo $CONFIG

echo "Write this to $WPA_CONF? [Y,n]"

echo "$CONFIG" >> /etc/wpa_supplicant/wpa_supplicant.conf


echo "Re-Reading wpa_supplicant config files"
set -x
wpa_cli reconfigure
set +x
